/*
  insn.def
  Copyright (C) 1996,2002 Toyohashi University of Technology
*/

/* defop(<nmemonic>, <type>, <opcode>, <cycle>, <action>) */

defop(LOAD,   4, 0x02,  5, (SET(REGX(INSN),FETCHMEM(MODADDR(MODE(INSN),ADDR(INSN))))))
defop(LOADR,  3, 0x05,  1, (SET(REGX(INSN),REGY(INSN))))
defop(LOADI,  5, 0x07,  3, (SET(REGX(INSN),IMMED(INSN))))
defop(STORE,  4, 0x72,  5, (STOREMEM(REGX(INSN),MODADDR(MODE(INSN),ADDR(INSN)))))
defop(ADD,    4, 0x12,  6, (SET(REGX(INSN),ADD(REGX(INSN),FETCHMEM(MODADDR(MODE(INSN),ADDR(INSN)))))))
defop(ADDR,   3, 0x15,  2, (SET(REGX(INSN),ADD(REGX(INSN),REGY(INSN)))))
defop(ADDI,   5, 0x17,  4, (SET(REGX(INSN),ADD(REGX(INSN),IMMED(INSN)))))
defop(SUB,    4, 0x22,  6, (SET(REGX(INSN),SUB(REGX(INSN),FETCHMEM(MODADDR(MODE(INSN),ADDR(INSN)))))))
defop(SUBR,   3, 0x25,  2, (SET(REGX(INSN),SUB(REGX(INSN),REGY(INSN)))))
defop(SUBI,   5, 0x27,  4, (SET(REGX(INSN),SUB(REGX(INSN),IMMED(INSN)))))
defop(MUL,    4, 0x32, 10, (SET(REGX(INSN),MUL(REGX(INSN),FETCHMEM(MODADDR(MODE(INSN),ADDR(INSN)))))))
defop(MULR,   3, 0x35,  6, (SET(REGX(INSN),MUL(REGX(INSN),REGY(INSN)))))
defop(MULI,   5, 0x37,  8, (SET(REGX(INSN),MUL(REGX(INSN),IMMED(INSN)))))
defop(DIV,    4, 0x42, 10, (SET(REGX(INSN),DIV(REGX(INSN),FETCHMEM(MODADDR(MODE(INSN),ADDR(INSN)))))))
defop(DIVR,   3, 0x45,  6, (SET(REGX(INSN),DIV(REGX(INSN),REGY(INSN)))))
defop(DIVI,   5, 0x47,  8, (SET(REGX(INSN),DIV(REGX(INSN),IMMED(INSN)))))
defop(CMP,    4, 0x52,  6, (SET(CREG,SUB(REGX(INSN),FETCHMEM(MODADDR(MODE(INSN),ADDR(INSN)))))))
defop(CMPR,   3, 0x55,  2, (SET(CREG,SUB(REGX(INSN),REGY(INSN)))))
defop(CMPI,   5, 0x57,  4, (SET(CREG,SUB(REGX(INSN),IMMED(INSN)))))
defop(JMP,    6, 0x80, 12, (SET(PC,PSEG(ADDR(INSN)))))
defop(JNZ,    6, 0x88, 12, (WHEN(NEQ(CREG),SET(PC,PSEG(ADDR(INSN))))))
defop(JZ,     6, 0x86, 12, (WHEN(EQ(CREG),SET(PC,PSEG(ADDR(INSN))))))
defop(JGT,    6, 0x8C, 12, (WHEN(GT(CREG),SET(PC,PSEG(ADDR(INSN))))))
defop(JGE,    6, 0x84, 12, (WHEN(GEQ(CREG),SET(PC,PSEG(ADDR(INSN))))))
defop(JLT,    6, 0x8A, 12, (WHEN(LT(CREG),SET(PC,PSEG(ADDR(INSN))))))
defop(JLE,    6, 0x82, 12, (WHEN(LEQ(CREG),SET(PC,PSEG(ADDR(INSN))))))
defop(CALL,   6, 0x90, 25, (SET(SP,ADD(SP,1)),STOREMEM(PC,DSEG(SP)),SET(PC,PSEG(ADDR(INSN)))))
defop(RETURN, 1, 0x92, 15, (SET(PC,FETCHMEM(DSEG(SP))),SET(SP,SUB(SP,1))))
defop(PUSH,   2, 0xA0,  6, (SET(SP,ADD(SP,1)),STOREMEM(REGX(INSN),DSEG(SP))))
defop(POP,    2, 0xA2,  6, (SET(REGX(INSN),FETCHMEM(DSEG(SP))),SET(SP,SUB(SP,1))))
defop(READ,   2, 0xB0,  0, (READ(REGX(INSN))))
defop(WRITEC, 2, 0xB2,  0, (WRITEC(REGX(INSN))))
defop(WRITED, 2, 0xB4,  0, (WRITED(REGX(INSN))))
defop(HALT,   1, 0x00,  0, (HALT()))
